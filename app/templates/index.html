<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Stylish Portfolio - Start Bootstrap Template</title>

    <!-- Bootstrap Core CSS -->
    <link href="/static/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="/static/vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic"
          rel="stylesheet" type="text/css">
    <link href="/static/vendor/simple-line-icons/css/simple-line-icons.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="/static/css/stylish-portfolio.min.css" rel="stylesheet">


</head>

<body id="page-top">

<!-- Navigation -->
<a class="menu-toggle rounded" href="#">
    <i class="fas fa-bars"></i>
</a>
<nav id="sidebar-wrapper">
    <ul class="sidebar-nav">
        <li class="sidebar-brand">
            <a class="js-scroll-trigger" href="#page-top">Start Bootstrap</a>
        </li>
        <li class="sidebar-nav-item">
            <a class="js-scroll-trigger" href="#page-top">Home</a>
        </li>
        {% if show %}
        <li class="sidebar-nav-item">
            <a class="js-scroll-trigger" href="#table">table</a>
        </li>
        {% endif %}
        <li class="sidebar-nav-item">
            <a class="js-scroll-trigger" href="#about">About</a>
        </li>
        <li class="sidebar-nav-item">
            <a class="js-scroll-trigger" href="#services">Services</a>
        </li>
        <li class="sidebar-nav-item">
            <a class="js-scroll-trigger" href="#portfolio">Portfolio</a>
        </li>
        <li class="sidebar-nav-item">
            <a class="js-scroll-trigger" href="#contact">Contact</a>
        </li>
    </ul>
</nav>

<!-- Header -->
<header class="masthead d-flex">
    <div class="container text-center my-auto">
        <h1 class="mb-1">Stylish Portfolio</h1>
        <h3 class="mb-5">
            <em>A Free Bootstrap Theme by Start Bootstrap</em>
        </h3>
        <a class="btn btn-primary btn-xl js-scroll-trigger" href="#about">Find Out More</a>
    </div>
    <div class="overlay"></div>
</header>

<script type="text/javascript">

    function upload_file() {
        var formData =
            new FormData($("#upload_form")[0]);
        $.ajax({
                url: "/upload",
                type: "POST",
                data: formData,
                async: true,
                cashe: false,
                contentType: false,
                processData: false,
                success: function (table_data) {
                    $("#myModal").modal("show");
                    for (i in table_data.table) {
                        var tr;
                        tr = "<tr>"
                        for (j in table_data.table[i]) {
                            tr = tr + '<td>' + table_data.table[i][j] + '</td>'
                        }
                        tr = tr + "</tr>"
                        $("#pdf_table").append(tr)
                    }
                    var parent = document.getElementById("pdf_table");
                    var div = document.createElement("div");

                    div.setAttribute("id", "table_id");
                    div.setAttribute("hidden", "")

                    div.innerHTML = table_data.id;
                    parent.appendChild(div);

                },
                error: function (table_data) {
                    alert("Fail to Upload!")
                }
            }
        )
    }

    function correct_pdf_table() {
        alert("Thank you for your contribution!")
        var id = document.getElementById("table_id").innerText;
        window.location.href = "/db_table?id=" + id;
    }

    function incorrect_pdf_table() {
        alert("Sorry! We will do better!");
        window.location.href = "/";
    }

</script>

<section class="content-section bg-light" id="about">
    <div class="container text-center">
        <div class="row">
            <div class="col-lg-10 mx-auto">
                <h2>Use test data in our paper</h2>
                <p class="lead mb-5">System will show the whole dataset!</p>
                <form action="upload" enctype='multipart/form-data' method='POST' id="upload_form">
                    <input type="file" name="file">
                    <br/>
                    <br/>
                    <input type="button" class="btn btn-dark btn-xl js-scroll-trigger" value="upload your own PDF"
                           id="upload_pdf" onclick="upload_file()">
                </form>
            </div>
        </div>
    </div>
</section>


<div class="modal inmodal fade" id="myModal">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content animated fadeIn">
            <div class="modal-header">
                <h3 class="modal-title">Is this your table?</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                </button>
            </div>
            <div class="modal-body">
                <table class="center table table-hover table-striped" id="pdf_table">
                    <tbody>
                    </tbody>
                </table>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" onclick="correct_pdf_table()">Yes</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal"
                        onclick="incorrect_pdf_table()">
                    No
                </button>
            </div>
        </div>
    </div>
</div>


{% if show %}
<section class="content-section bg-primary text-white text-center" id="table">
    <div class="container">
        <div class="content-section-heading">
            <h3 class="text-secondary mb-0">Maybe</h3>
            <h2 class="mb-5">This is your table?</h2>
        </div>

        <table class="table table-striped table-hover">
            <tbody>
            {% for indexs in db_table.index %}
            <tr>
                <!--<th scope="row">Primary</th>-->
                {% for item in db_table.loc[indexs].values %}
                <td><span style="color: #ffffff;">{{item}}</span></td>
                {% endfor %}
            </tr>
            {% endfor %}
            </tbody>
        </table>

    </div>
</section>
{% endif %}

<!-- Footer -->
<footer class="footer text-center">
    <div class="container">
        <ul class="list-inline mb-5">
            <li class="list-inline-item">
                <a class="social-link rounded-circle text-white mr-3" href="#">
                    <i class="icon-social-facebook"></i>
                </a>
            </li>
            <li class="list-inline-item">
                <a class="social-link rounded-circle text-white mr-3" href="#">
                    <i class="icon-social-twitter"></i>
                </a>
            </li>
            <li class="list-inline-item">
                <a class="social-link rounded-circle text-white" href="#">
                    <i class="icon-social-github"></i>
                </a>
            </li>
        </ul>
        <p class="text-muted small mb-0">Copyright &copy; Your Website 2019</p>
    </div>
</footer>

<!-- Scroll to Top Button-->
<a class="scroll-to-top rounded js-scroll-trigger" href="#page-top">
    <i class="fas fa-angle-up"></i>
</a>

<!-- Bootstrap core JavaScript -->
<script src="/static/vendor/jquery/jquery.min.js"></script>
<script src="/static/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

<!-- Plugin JavaScript -->
<script src="/static/vendor/jquery-easing/jquery.easing.min.js"></script>

<!-- Custom scripts for this template -->
<script src="/static/js/stylish-portfolio.min.js"></script>


</body>

</html>

